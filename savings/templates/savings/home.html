{% extends 'base.html' %} 
{% load static %}
<title>{% block title %}Home{% endblock %}</title>

{% block content %}

<div>
    <h1 style="display: inline;">ACCOUNTS</h1>
    <a href="{% url 'savings:add-account' %}" target="_blank">
    <button id="account-btn" style="vertical-align: middle;">‚ûïAdd Account</button>
    </a>
    <a href="{% url 'savings:deposit' %}" target="_blank">
        <button id="deposit-btn">‚ûï Deposit Money</button>
        </a>
</div>
<div id="accounts">
    {% for account in accounts %}
        <div>
            <li>
                <h5 style="display: inline;">{{ account}}</h5>
                <button id="delete-btn" >üóëÔ∏è</button>
            </li>
        </div>
    {% endfor %}
</div>
<br/><br/>
<div>
    <h1 style="display: inline;">SAVINGS GOALS</h1>
    <a href="{% url 'savings:add-goal' %}" target="_blank">
    <button id="goal-btn"  >‚ûïAdd</button>
    </a>

</div>
<div id="goals">
    {% for goal in goals %}
    <div>
        <div class="d-flex flex-column"> 
            <div class="d-flex flex-row">
                <div>
                    <img src="{{ goal.image }}" onerror="this.onerror=null; this.src='Default.jpg'" alt="{{ goal.name }}" />
                </div>
                <h5>{{ goal.name }}: {{ goal.cost }} </h5>
                <div class="goal_progress_btns">    
                    <button id="buy-btn">BUY</button>
                    <button id="edit-btn">‚öô</button>
                    <button id="delete-btn">üóëÔ∏è</button>
                </div>
            </div>
            <div class="progress d-flex flex-column" >
                <div id="progress-el" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" onload="calc_progress()"></div>
            </div>
            <script>
                function calc_progress() {
                var progress = document.getElementById("progress-el");
                var total = goal.account.amount / goal.cost * 100;
                if (total > 100) {
                    progress.style.width = `100%`;
                    progress.ariaValueNow = 100;
                    return ;
                }
                progress.style.width = `${total}%`;
                progress.ariaValueNow = total;
                return;
                }
            </script>
                
        </div>
    </div>
    {% endfor %}
</div>



{% endblock content %}


